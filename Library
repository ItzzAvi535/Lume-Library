local Library = {}

local TweenService = game:GetService("TweenService")
local player = game.Players.LocalPlayer

task.spawn(function()
    local splashGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
    splashGui.ResetOnSpawn = false
    splashGui.Name = "LumeSplash"

    local textLabel = Instance.new("TextLabel")
    textLabel.Parent = splashGui
    textLabel.Size = UDim2.new(0, 400, 0, 50)
    textLabel.Position = UDim2.new(0.5, -200, 0.5, -25)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = "Lume Library </>"
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.TextScaled = true
    textLabel.Font = Enum.Font.GothamBold
    textLabel.TextTransparency = 1

    local fadeIn = TweenService:Create(textLabel, TweenInfo.new(1, Enum.EasingStyle.Sine), {TextTransparency = 0})
    fadeIn:Play()
    fadeIn.Completed:Wait()

    task.wait(1.5)

    local fadeOut = TweenService:Create(textLabel, TweenInfo.new(1, Enum.EasingStyle.Sine), {TextTransparency = 1})
    fadeOut:Play()
    fadeOut.Completed:Wait()

    splashGui:Destroy()
end)

function Library:CreateWindow(title)
    local playerGui = player:WaitForChild("PlayerGui")
    local screenGui = Instance.new("ScreenGui", playerGui)
    screenGui.Name = "LumeUI_" .. tostring(math.random(1000, 9999))
    screenGui.ResetOnSpawn = false

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 600, 0, 350)
    mainFrame.Position = UDim2.new(0.5, -300, 0.5, -175)
    mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = screenGui

    Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 10)

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -60, 0, 40)
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title or "Lume UI"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 22
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Name = "Title"
    titleLabel.Parent = mainFrame

    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 30, 0, 30)
    closeBtn.Position = UDim2.new(1, -35, 0, 5)
    closeBtn.Text = "X"
    closeBtn.TextColor3 = Color3.fromRGB(255, 0, 0)
    closeBtn.BackgroundTransparency = 1
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 18
    closeBtn.Parent = mainFrame

    closeBtn.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)

    local tabHolder = Instance.new("Frame")
    tabHolder.Size = UDim2.new(0, 120, 1, -50)
    tabHolder.Position = UDim2.new(0, 0, 0, 50)
    tabHolder.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    tabHolder.Parent = mainFrame

    local tabList = Instance.new("UIListLayout", tabHolder)
    tabList.SortOrder = Enum.SortOrder.LayoutOrder
    tabList.Padding = UDim.new(0, 5)

    local contentFrame = Instance.new("Frame")
    contentFrame.Size = UDim2.new(1, -130, 1, -60)
    contentFrame.Position = UDim2.new(0, 130, 0, 50)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Parent = mainFrame

    local window = {}
    window.Tabs = {}

    function window:AddTab(tabName)
        local tab = {}
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, -10, 0, 30)
        button.Position = UDim2.new(0, 5, 0, 0)
        button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        button.TextColor3 = Color3.new(1, 1, 1)
        button.Font = Enum.Font.Gotham
        button.TextSize = 16
        button.Text = tabName
        button.Parent = tabHolder

        local tabFrame = Instance.new("Frame")
        tabFrame.Size = UDim2.new(1, 0, 1, 0)
        tabFrame.BackgroundTransparency = 1
        tabFrame.Visible = false
        tabFrame.Parent = contentFrame

        local layout = Instance.new("UIListLayout", tabFrame)
        layout.Padding = UDim.new(0, 6)

        button.MouseButton1Click:Connect(function()
            for _, t in pairs(window.Tabs) do
                t.Frame.Visible = false
            end
            tabFrame.Visible = true
        end)

        function tab:AddButton(text, callback)
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1, -20, 0, 40)
            btn.Position = UDim2.new(0, 10, 0, 0)
            btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            btn.TextColor3 = Color3.new(1, 1, 1)
            btn.Font = Enum.Font.Gotham
            btn.TextSize = 18
            btn.Text = text
            btn.Parent = tabFrame
            btn.MouseButton1Click:Connect(callback)
        end

        tab.Frame = tabFrame
        window.Tabs[tabName] = tab

        if not next(window.Tabs) then
            tabFrame.Visible = true
        end

        return tab
    end

    return window
end

return Library
